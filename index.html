<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" id="viewport" content="width=device-width,height=device-height,initial-scale=1.0,user-scalable=no" />
<script src="libs/jquery191min.js" type="text/javascript"></script>
<script src="libs/Kinetic.js" type="text/javascript"></script>
<link rel="stylesheet" type="text/css" href="style.css">
<title>Cyber blaster</title>
</head>

<body>
    <div class="bgMusic"></div>
    <div id="main">
        <!--<div id="splash">-->
            <img id="splash" src="images/logo.JPG" />
        <!--</div>-->
        
    	<div id="menu">
            <span><h2><span class="bigger">C</span>yber <span class="bigger">B</span>laster</h2></span>
            <div class="newgame" ><p><span class="bigger">J</span>ouer</p></div>
            <div class="highscore" ><p><span class="bigger">H</span>igh Score</p></div>
            <div class="setting1" ><p><span class="bigger">R</span>églage</p></div>
            <div class="help1" ><p><span class="bigger">I</span>nstructions</p></div>
            <div class="credit"><p><span class="bigger">C</span>rédit</p></div>
            <div class="exit"><p><span class="bigger">S</span>ortie</p></div>
        </div>
        
        
        <div id="setting1">
            <h2>Réglage</h2>
            <ul>
                <li class="music">Music ON</li>
                <li class="sound">Sound FX ON</li>
                <li class="bg">Background Scrolling ON</li>
            </ul>
        </div>
        
        <div id="help1">
            <h2>Instructions</h2>
	        <img src="images/obj.png" height="100px"/>
            <p>This is the enemy you are suppose to destroy</p>
            <img src="images/base.jpg" height="100px"/>
            <p>This is the base you are suppose to defend</p>
        </div>
        
        <div id="credit">
            <h2>Art/Design</h2>
            <p><span>JTR Jeux</span><br /><img src="images/logo.JPG" width="300px"/></p>
            <h2>Code/Develop</h2>
            <p>Alic Jiang</p>
            <p>Peter Kim</p>
            <h2>Music</h2>
            <p><span>Ben Prunty - Chromatic T-Rex</span><br /><img src="music/logo.png" width="300px"/></p>
            </h2>
        </div>
        
        <div id="save">
            <div class="save 0">Alic level 5 - May 9th 09:19</div>
            <div class="save 2">Slot 2</div>
            <div class="save 3">Slot 3</div>
            <div class="save 4">Slot 4</div>
            <div class="save 5">Slot 5</div>
        </div>
    </div>
    
	<div id="gamefield">
        <div id="myCanvas"></div>
        
        <div id="levelComplete">
            <h3>Congradulations, level complete!</h3>
            <div class="nextLevel">Continue</div>
            <div class="backMain">Main menu</div>
        </div>
        
        <div id="leftPanel">
            <div id="lives">
                Lives: <img src="images/life.jpg" height="30" />x<span class="lives"></span>
            </div>
            <div id="score">
                Score: <span class="score"></span>
            </div>
        </div>
        
        <div id="rightPanel">
            Level: <span class="level"></span>
        </div>
        
        <div id="shop">
            <h2>Shop</h2>
            <div>
                <p>Bomb</p>
                <img src="images/bomb.jpg" width="100" height="100"/>
                <p class="priceBomb">Price: </p>
                <span class="bomb">Buy</span>
            </div>
            <div>
                <p>Shield</p>
                <img src="images/shield.jpg" width="100" height="100"/>
                <p class="priceShield">Price: </p>
                <span class="shield">Buy</span>
            </div>
            <div>
                <p>Life</p>
                <img src="images/life.jpg" width="100" height="100"/>
                <p class="priceLife">Price: </p>
                <span class="life">Buy</span>
            </div>
            <div>
                <p>Freeze</p>
                <img src="images/freeze.jpg" width="100" height="100"/>
                <p class="priceFreeze">Price: </p>
                <span class="freeze">Buy</span>
            </div>
        </div>
        
        <div id="setting2">
            <h2>Réglage</h2>
            <ul>
                <li class="music">Music ON</li>
                <li class="sound">Sound FX ON</li>
                <li class="bg">Background Scrolling ON</li>
            </ul>
        </div>
        
        <div id="help2">
            <h2>Instructions</h2>
            <img src="images/obj.png" height="100px"/>
            <p>This is the enemy you are suppose to destroy</p>
            <img src="images/base.jpg" height="100px"/>
            <p>This is the base you are suppose to defend</p>
        </div>
        
        <div id="mainmenu">
            <h3>Are you sure you want to go back to mainmenu?</h3>
            <h3>All unsaved data will be lost.</h3>
            <span class="backMain">Yes</span>
            <span class="no">No</span>
        </div>
        
        <div id="ui">
            <div id="nonPause">
                <div id="input"></div>
                <table>
                    <tbody>
                        <tr>
                            <td><div  class="keypad" onclick="addNum(7)" id="seven">7</div></td>
                            <td><div  class="keypad" onclick="addNum(8)" id="eight">8</div></td>
                            <td><div  class="keypad" onclick="addNum(9)" id="nine">9</div></td>
                        </tr>
                        <tr>
                            <td><div  class="keypad" onclick="addNum(4)" id="four">4</div></td>
                            <td><div  class="keypad" onclick="addNum(5)" id="five">5</div></td>
                            <td><div  class="keypad" onclick="addNum(6)" id="six">6</div></td>
                        </tr>
                        <tr>
                            <td><div  class="keypad" onclick="addNum(1)" id="one">1</div></td>
                            <td><div  class="keypad" onclick="addNum(2)" id="two">2</div></td>
                            <td><div  class="keypad" onclick="addNum(3)" id="three">3</div></td>
                        </tr>
                        <tr>
                            <td><div  class="keypad" onclick="clean()" id="clear">clear</div></td>
                            <td><div  class="keypad" onclick="addNum(0)" id="zero">0</div></td>
                            <td><div  class="keypad" onclick="submit()" id="submit">submit</div></td>
                        </tr>
                    </tbody>
                </table>
                
                <div id="buttons">
                    <div class="pause">Pause</div>
                    <!--<div class="lives">Lives: 3</div>-->
                    <div class="numBomb" onclick="bomb()">Bomb: 0</div>
                    <div class="numShield" onclick="shield()">Shield: 0</div>
                    <div class="numFreeze" onclick="freeze()">Freeze: 0</div>
                </div>
            </div>
            <div id="pauseScreen">
                <div class="resume">Resume</div>
                <div class="shop">Shop</div>
                <div class="setting2">Setting</div>
                <div class="help2">Help</div>
                <div class="mainmenu">Main Menu</div>
            </div>
        </div>
        
    </div>
    
    
    
    <script src="script.js" type="text/javascript"></script>
	<script>
        function hideDiv (div){
            $(div).css('display','none');
		}
        function fadeInDiv (div){
            $(div).fadeIn();
        }
		hideDiv('#gamefield');
		hideDiv('#menu');
		hideDiv('#setting1');
		hideDiv('#help1');
        hideDiv('#credit');
        hideDiv('#save');
        hideDiv('#pauseScreen');
        hideDiv('#shop');
        hideDiv('#setting2');
        hideDiv('#help2');
        hideDiv('#mainmenu');
        hideDiv('#levelComplete');
		//$('body').css('width',window.innerWidth);
		//$('body').css('height',window.innerHeight);
			
		var gamestart = false;
		var mainInterval = null;
		var mainPosition = 0;
		var count = 0;
		var mainInterval = window.setInterval(mainAnimation, 1000/60);
		var splashscreen;
		var main;
        var bgscrolling = true;
        var bgImg = new Image();
        var music = true;
        var sound = true;
        var priceBomb = 1000;
        var priceShield = 2000;
        var priceLife = 3000;
        var priceFreeze = 4000;
        var level =0;
        var gameLoop;

        bgImg.src = "images/space.png";
        
        if(count === 0){
			splashscreen = window.setInterval(splash, 1000);
			count+=1;
		}
		
		function mainAnimation() {
            if(bgscrolling){
                mainPosition--;
                $("#main").css({backgroundPosition: (mainPosition * 3) + "px 0px"});
                if(Math.abs(mainPosition)>=bgImg.width){
				mainPosition = 0;
			}
            }
			
		}
		function splash() {
			$('#splash').fadeOut("800");
			main = window.setInterval(function () {
				if (count == 1){
					$('#menu').fadeIn("500");
					count+=1;
				}
			},500);
		}
        
        $('.priceBomb').append(priceBomb);
        $('.priceShield').append(priceShield);
        $('.priceLife').append(priceLife);
        $('.priceFreeze').append(priceFreeze);
        $('.lives').text(lives);
        $('.level').text(level+1);
        $('.score').text(score);

		$(document).ready(function() {
            //for main menu selections
			$('.newgame').click(function(){
                // hideDiv('#help1');
                // hideDiv('#setting1');
                // fadeInDiv('#save');
                
             
    			$('#main').css('display','none');
				$('#gamefield').fadeIn();
				gamestart = true;
                enemies = new Array();
                enemyNum=0;
                level=0;
                levelSelect(level);
                gameLoop = window.setInterval(enemyMaker(), enemyDelay);
                bgInterval = window.setInterval(bgAnimation, 1000/30);
                ended();
				window.clearInterval(mainInterval);
                $('.level').text(level+1);
          
			});
            $('.setting1').click(function(){
                hideDiv('#help1');
                hideDiv('#save');
				fadeInDiv('#setting1');
			});
            $('.bg').click(function(){
                if(bgscrolling){
                    bgscrolling = false;
                    $('.bg').text("Background Scrolling OFF");
                }else{
                    bgscrolling = true;
                    $('.bg').text("Background Scrolling ON");
                }
            });
            $('.music').click(function(){
                if(music){
                    music = false;
                    musicPause();
                    $('.music').text("Music OFF");
                }else{
                    music = true;
                    musicPlay();
                    $('.music').text("Music ON");
                }
            });
            $('.sound').click(function(){
                if(sound){
                    sound = false;
                    $('.sound').text("Sound FX OFF");
                }else{
                    sound = true;
                    $('.sound').text("Sound FX ON");
                }
            });
			$('.help1').click(function(){
                hideDiv('#setting1');
                hideDiv('#save');
                fadeInDiv('#help1');
			});
            $('.credit').click(function(){
                hideDiv('#setting1');
                hideDiv('#help1');
                hideDiv('#menu');
                hideDiv('#save');
                fadeInDiv('#credit');
            });
            $('#credit').click(function(){
                hideDiv('#credit');
                fadeInDiv('#menu');
            });
            //for in-game selections
            $('.pause').click(function(){
                hideDiv('#nonPause');
                $('#myCanvas').fadeTo(400, 0.5);
                fadeInDiv('#pauseScreen');
                animStop(true);
                pause = true;
            });
            $('.resume').click(function(){
                hideDiv('#pauseScreen');
                hideDiv('#setting2');
                hideDiv('#shop');
                hideDiv('#help2');
                hideDiv('#mainmenu');
                fadeInDiv('#nonPause').fadeIn();
                $('#myCanvas').fadeTo(400, 1.0);
                animStop(false);
                pause =false;
            });
            $('.shop').click(function(){
                hideDiv('#mainmenu');
                hideDiv('#setting2');
                hideDiv('#help2');
                fadeInDiv('#shop');
            });
            $('.bomb').click(function(){
                if(score>=priceBomb){
                    score -= priceBomb;
                    numBomb +=1;
                    $('.numBomb').text('Bomb: ' + numBomb);
                }
            });
            $('.shield').click(function(){
                if(score>=priceShield){
                    score -= priceShield;
                    numShield +=1;
                    $('.numShield').text('Shield: ' + numShield);
                }
            });
            $('.life').click(function(){
                if(score>=priceLife){
                    score -= priceLife;
                    lives +=1;
                    $('.lives').text(lives);
                }
            });
            $('.freeze').click(function(){
                if(score>=priceFreeze){
                    score -= priceFreeze;
                    numFreeze +=1;
                    $('.numFreeze').text('Freeze: ' + numFreeze);
                }
            });
            $('.setting2').click(function(){
                hideDiv('#mainmenu');
                hideDiv('#shop');
                hideDiv('#help2');
                fadeInDiv('#setting2');
            });
            $('.help2').click(function(){
                hideDiv('#mainmenu');
                hideDiv('#shop');
                hideDiv('#setting2');
                fadeInDiv('#help2');
            });
            $('.mainmenu').click(function(){
                hideDiv('#setting2');
                hideDiv('#shop');
                hideDiv('#help2');
                fadeInDiv('#mainmenu');
            });
            $('.backMain').click(function(){
                gamestart = false;
                bgscrolling = true;
                clearInterval(gameLoop);
                clearInterval(bgInterval);
                $('#gamefield').css('display','none');
                $('#main').fadeIn();
                ended();
                switchTrack(1);
                mainInterval = window.setInterval(mainAnimation, 1000/60);
                hideDiv('#mainmenu');
                hideDiv('#pauseScreen');
                fadeInDiv('#nonPause');
                $('#myCanvas').fadeTo(400, 1.0);
                pause=false;
                for(var i=0;i<enemies.length;i++)
                {
                    enemies[i].image.hide();
                    enemies[i].text.hide(); 
                }
            });
            $('.no').click(function(){
                $('#mainmenu').fadeOut();
            });
            $('.nextLevel').click(function(){
                level++;
                levelSelect(level);
                enemyNum=0;
                hideDiv("#levelComplete");
                $('.level').text(level+1);
               
            });
        });
        
            
            
    </script>
    
    
    
</body>
</html>